javascript:(()=>{function e(e,t){const n=document.createElement(t);return n.className="content-enhancer",n.innerHTML=e,n}const t=document.head,n=e("body{margin: 0;background-color: black}img, video{display: block;width: 100%}video{margin-top: 100px;margin-bottom: 100px}.loading{background-color: hsl(30, 75%, 50%)}.loaded{background-color: hsl(120, 75%, 50%)}.clicked{opacity: 0.3}.hide{display: none}.show{display: block}.go-video-l1{width:100%;height:100vh;background-color: hsl(0, 50%, 25%)}.go-manga-l1{height:50%;width:20%;position:fixed;top:0;left:0}.load-more, .refresh{margin-top: 200px;margin-bottom: 200px}","style");t.appendChild(n);const a=e('async function loadL1(){pc++;const e=await getResponse(nrp.href),t=await e.text(),a=(new DOMParser).parseFromString(t,"text/html"),n=getThumbnailImages(a),o=document.getElementById(L1);for(const e of n)o.appendChild(e);if(setNextResultPage(a),void 0!==nrp)if(pc<2)await loadL1();else{const e=document.createElement("button");e.className="load-more",e.innerText="Load More",o.appendChild(e),e.onclick=loadL1}}',"script");t.appendChild(a);const o=e('async function loadL2(e){const t=e.getAttribute("data-href");let a;switch(oh.includes(TM)||oh.includes(KJ)?a="video":oh.includes(NH)?a="hmanga":oh.includes(AS)&&(a="nhmanga"),a){case"video":await handleVideo(t,e);break;case"hmanga":await handleHManga(t);break;case"nhmanga":await handleNhManga(t)}}function goToL1(e){document.getElementById(L1).className="show",document.getElementById(e).remove(),bl=!0,window.scrollTo({top:l1sp})}async function handleVideo(e,t){const a="l2"+e,n="bg"+e,o="loaded"===t.getAttribute("data-load-status"),d="loading"===t.getAttribute("data-load-status");if(o){l1sp=window.scrollY,window.scrollTo({top:0}),t.removeAttribute("data-load-status");const e=document.getElementById(n);e.after(t),e.remove(),document.getElementById(L1).className="hide",document.getElementById(a).className="show"}else if(d);else{const o=document.createElement("div");t.setAttribute("data-load-status","loading"),o.id=n,o.className="loading",t.after(o),o.appendChild(t),t.className="clicked";const d=document.createElement("div");document.body.appendChild(d);const l=document.createElement("video");d.appendChild(l);const s=document.createElement("source"),c=await getResponseSources(e);s.src=getBestSource(c),l.appendChild(s);const i=document.createElement("button");d.appendChild(i);const r=document.createElement("div");d.appendChild(r),d.id=a,d.className="hide",i.className="refresh",i.type="button",i.onclick=refreshVideo,i.innerText="Reload the video",r.className="go-video-l1",r.setAttribute("onclick",\'goToL1("\'+a+\'")\'),l.controls=!0,l.preload="auto",l.playsInline=!0,l.muted=!0,l.onloadedmetadata=async()=>{l.onloadedmetadata=null,await waitFor(100),await l.play(),await waitFor(100),l.pause(),t.setAttribute("data-load-status","loaded"),o.className="loaded"},l.onerror=async()=>{await waitFor(5e3),l.load()}}}function refreshVideo(){document.querySelector("video").load()}async function getResponseSources(e){const t=await getResponse(e),a=await t.text(),n=(new DOMParser).parseFromString(a,"text/html");let o;return e.includes(TM)?o=n.getElementById("vjsplayer"):e.includes(KJ)&&(o=n.getElementById("player-fluid")),o.getElementsByTagName("source")}function getBestSource(e){let t=null;for(const a of e)(oh.includes(TM)&&a.src.includes("/hd/")||oh.includes(KJ)&&a.src.includes("720p"))&&(t=a.src);return null===t&&(t=e[0].src),t}async function handleHManga(e){l1sp=window.scrollY,window.scrollTo({top:0});const t="l2-container",a=document.createElement("div");a.id=t,document.body.appendChild(a),document.getElementById(L1).className="hide";const n=document.createElement("div");n.className="go-manga-l1",n.setAttribute("onclick","goToL1(\'l2-container\')"),a.appendChild(n);const o=await getResponse(e),d=await o.text(),l=(new DOMParser).parseFromString(d,"text/html");nip=l.querySelector(".gallerythumb"),bl=!1,await loadImage(a)}async function loadImage(e){if(""!==nip?.href&&!bl){const t=await getResponse(nip.href),a=await t.text(),n=(new DOMParser).parseFromString(a,"text/html"),o=n.getElementById("image-container").children[0].children[0],d=new Image;d.src=o.src,e.appendChild(d),setNextImagePage(n),d.onload=async()=>{await loadImage(e)},d.onerror=async()=>{await waitFor(5e3),d.src=o.src+"?time="+Date.now()}}}async function handleNhManga(e){}function setNextImagePage(e){nip=e.querySelector(".next")}',"script");t.appendChild(o);const l=e('let nrp,nip,l1sp,oh,bl,pc=1;const L1="l1-container",TM="tokyomotion",KJ="kissjav",NH="nhentai",AS="asurascans";function getThumbnailImages(e){const t=[];let n;oh.includes(TM)?n=e.querySelectorAll(".thumb-popu"):oh.includes(KJ)?n=e.querySelector(".videos").children:oh.includes(NH)&&(n=e.querySelector(".index-container").children);for(const e of n){let n,c;if(oh.includes(TM))n=e,c=n.children[0].children[0];else if(oh.includes(KJ)){if(n=e.children[0].children[0].children[0].children[0],c=n?.children[0],void 0===c)continue}else oh.includes(NH)&&(n=e.children[0],c=n.children[0]);null!==c.getAttribute("data-src")&&(c.src=c.getAttribute("data-src"));const o=new Image;o.setAttribute("data-href",n.href),o.setAttribute("onclick","loadL2(this)"),o.src=c.src,t.push(o)}return t}async function getResponse(e){const t=await fetch(e);return 200===t.status?t:(await waitFor(5e3),await getResponse(e))}async function waitFor(e){await new Promise((t=>setTimeout(t,e)))}function setNextResultPage(e){oh.includes(TM)?nrp=e.getElementsByClassName("prevnext")[0]:oh.includes(KJ)?nrp=e.getElementsByClassName("pagination-next")[0]:oh.includes(NH)&&(nrp=e.getElementsByClassName("next")[0])}(async()=>{oh=location.href,setNextResultPage(document);let e=getThumbnailImages(document);const t=document.querySelectorAll(".content-enhancer");document.body.parentElement.remove();const n=document.createElement("body"),c=document.createElement("html"),o=document.createElement("head");for(const e of t)o.appendChild(e);c.appendChild(o),c.appendChild(n),document.appendChild(c);const i=document.createElement("div");i.id=L1,n.appendChild(i);for(const t of e)i.appendChild(t);await loadL1()})();',"script");t.appendChild(l)})();
